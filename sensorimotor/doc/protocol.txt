///////////////////////////////
// Supreme Machines          //
// Sensorimotor UX0 protocol //
// Version 1.0               //
///////////////////////////////


+--------------------------------+
| BUS LOAD (example calculation) |
+--------------------------------+

Baudrate: 1 Mbit/s
Serial Mode 8N1,  1 Byte = 10bit (incl start+stop bit)

Response ca. 20 Byte
Number of motors ca. 5

5 motors: ca. 100 Byte/s = 1.000 bit/s
Frequency: 100 Hz -> 10ms, approx. communication time 10% = 1ms

1.000 bit/s * 1ms = 1.000.000 bit/s = 1 Mbit/s


+---------+
| CONTENT |
+---------+

List of host requests:
 + data_requested
 + set_voltage
 + ping
 + set_id
 + (toggle_led)
 + set_pwm_limit
 + ext_sensor_requested

List of sensorimotor responses:
 + data_requested_response
 + ping_response
 + set_id_response
 + ext_sensor_requested_response


+---------------------------------------------------------+
| UX0 State Request from Host to Sensorimotor             |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 1100.0000 | Request ID        | 0xC0               |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 Ping Request from Host to Sensorimotor              |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 1110.0000 | Request ID        | 0xE0               |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 SetID Request from Host to Sensorimotor             |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 0111.0000 | Request ID        | 0x70               |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | 0xxx.xxxx | Motor ID (new)    | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 05 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 Motor Request from Host to Sensorimotor             |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 1011.000D | Request ID        | 0xB0, 0xB1, D:DIR  |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | xxxx.xxxx | Voltage           | simple 8bit PWM    |
+----+-----------+-------------------+--------------------+
| 05 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 PWM Limitation Request from Host to Sensorimotor    |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 1010.0000 | Request ID        | 0xA0               |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | xxxx.xxxx | Limit             | max. driven PWM    |
+----+-----------+-------------------+--------------------+
| 05 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 External Sensor Request from Host to Sensorimotor   |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 0100.0000 | Request ID        | 0x40               |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | xxxx.xxxx | Sensor ID         | 0..255             |
+----+-----------+-------------------+--------------------+
| 05 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 Ping Response from Sensorimotor to Host             |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 1110.0001 | Response ID       | 0xE1               |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 SetID Response from Sensorimotor to Host            |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 0111.0001 | Response ID       | 0x71               |
+----+-----------+-------------------+--------------------+
| 03 | 0xxx.xxxx | Motor ID (new)    | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 State Response from Sensorimotor to Host            |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 1000.0000 | Response ID       | 0x80               |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | xxxx.xxxx | Position measured | uint16, 10bit eff. |
| 05 | xxxx.xxxx | 10bit ADC + LPF   | 0..0xFFFF = 0..3V3 |
+----+-----------+-------------------+--------------------+
| 06 | 0000.00xx | Current           | uint16, lower 10bit|
| 07 | xxxx.xxxx | Current           | 0..1023 = 0..3A3   |
+----+-----------+-------------------+--------------------+
| 08 | xxxx.xxxx | Velocity          | signed int16 value |
| 09 | xxxx.xxxx | derived from pos. | -32768...+32676    |
+----+-----------+-------------------+--------------------+
| 10 | 0000.00xx | Voltage Supply    | uint16, lower 10bit|
| 11 | xxxx.xxxx | Voltage Supply    | 0..1023 = 0..13V   |
+----+-----------+-------------------+--------------------+
| 12 | xxxx.xxxx | Temperature       | Temp in 0.01Â°C     |
| 13 | xxxx.xxxx | Temperature       | signed int16       |
+----+-----------+-------------------+--------------------+---+
| 16 | xxxx.xxxx | State/Context     | Reserved           |
| 17 | xxxx.xxxx | State/Context     |                    |   N
| 18 | xxxx.xxxx | State/Context     |                    |   o
| 19 | xxxx.xxxx | State/Context     |                    |   t
+----+-----------+-------------------+--------------------+
| 20 | xxxx.xxxx | Warnings          | 0:                 |   i
|    |           |                   | 1:                 |   m
|    |           |                   | 2:                 |   p
|    |           |                   | 3:                 |   l
|    |           |                   | 4:                 |   e
|    |           |                   | 5:                 |   m
|    |           |                   | 6:                 |   e
|    |           |                   | 7:                 |   n
+----+-----------+-------------------+--------------------+   t
| 21 | xxxx.xxxx | Faults            | 0:                 |   e
|    |           |                   | 1:                 |   d
|    |           |                   | 2:                 |
|    |           |                   | 3:                 |   y
|    |           |                   | 4:                 |   e
|    |           |                   | 5:                 |   t
|    |           |                   | 6:                 |   .
|    |           |                   | 7:                 |
+----+-----------+-------------------+--------------------+---+
| 22 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

+---------------------------------------------------------+
| UX0 External Sensor Response from Sensorimotor to Host  |
+----+-----------+-------------------+--------------------+
| 00 | 1111.1111 | Sync 0            | 0xFF               |
| 01 | 1111.1111 | Sync 1            | 0xFF               |
| 02 | 0100.0001 | Response ID       | 0x41               |
| 03 | 0xxx.xxxx | Motor ID          | IDs 0..127         |
+----+-----------+-------------------+--------------------+
| 04 | xxxx.xxxx | Data 0            |                    |
| 05 | xxxx.xxxx | Data 1            |                    |
| 06 | xxxx.xxxx | Data 2            |                    |
| 07 | xxxx.xxxx | Data 3            |                    |
| 08 | xxxx.xxxx | Data 4            |                    |
| 09 | xxxx.xxxx | Data 5            |                    |
+----+-----------+-------------------+--------------------+
| 10 | cccc.cccc | Checksum          | ~sum_i(byte_i) + 1 |
+----+-----------+-------------------+--------------------+

